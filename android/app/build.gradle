buildscript {
    ext.kotlin_version = '2.0.0'
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

plugins {
    id "com.android.application"
    id "kotlin-android"
    id "dev.flutter.flutter-gradle-plugin"
    id 'com.google.gms.google-services'
}

android {
    namespace = "com.example.mfc"
    compileSdk = 35
    ndkVersion = flutter.ndkVersion

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_1_8
    }

    defaultConfig {
        applicationId = "com.example.mfc"
        minSdk = 23
        targetSdk = 35
        versionCode = flutter.versionCode
        versionName = flutter.versionName
    }

    buildTypes {
        release {
            signingConfig = signingConfigs.debug
        }
    }

   testOptions {
         testOptions {
        unitTests.includeAndroidResources = true
        unitTests.all {
            ignoreFailures = true
        }
    }
    }
}

flutter {
    source = "../.."
}

dependencies {
    implementation platform('com.google.firebase:firebase-bom:33.11.0')
    implementation 'com.google.firebase:firebase-analytics'
}

tasks.withType(Test).configureEach {
    it.enabled = false
}

configurations.all {
  resolutionStrategy.eachDependency { details ->
    if (details.requested.group == 'androidx.core'
        && (details.requested.name == 'core-ktx' || details.requested.name == 'core')) {
      // 1.15.0 still works with AGP 8.4.1
      details.useVersion '1.15.0'
      details.because "1.16.0 requires AGP 8.6+, we're on 8.4.1"
    }
  }
}
